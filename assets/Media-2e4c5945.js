import{u as f,b as a,r as h,d as x,o as r,c as d,f as g,g as s,t as c,a as v,F as S,l as k,e as b,w as B,n as w,p as I,q as R,A as D,B as U,C as A}from"./index-bf880f66.js";const C={class:"main__intro"},F={alt:"",class:"main__intro_bg"},L={class:"main__intro_inner"},T={class:"main__intro_inner-left"},Y={class:"main__intro_inner-desc"},j={class:"main__intro_inner-right"},N={alt:""},O={class:"main__intro_actors"},V=s("h2",{class:"main__intro_actors-title"},"В главных ролях",-1),q={__name:"Intro",props:{type:String,item:Object},setup(t){const e=t,i=f(),n=a(()=>i.movieUrl),_=a(()=>i.movieSize),l=a(()=>new Date(e.item.release_date).getFullYear()||new Date(e.item.first_air_date).getFullYear()),m=a(()=>e.item.genres.reduce((p,y)=>p+`, ${y.name}`,"")),u=a(()=>Math.floor(e.item.runtime/60)||Math.floor(e.item.number_of_episodes/60)),o=a(()=>e.item.runtime%60||e.item.number_of_episodes%60);return(p,y)=>{const M=h("trailer"),z=h("Actors"),$=x("lazy");return r(),d("div",C,[g(s("img",F,null,512),[[$,n.value+_.value+t.item.poster_path]]),s("div",L,[s("div",T,[s("h1",null,c(t.item.title||t.item.name),1),s("p",null,c(t.item.overview||"Нет описания"),1),s("p",Y,[s("span",null,c(l.value)+" "+c(m.value),1),s("span",null,c(u.value)+"h "+c(o.value)+"m",1)]),v(M)]),s("div",j,[g(s("img",N,null,512),[[$,n.value+_.value+t.item.poster_path]])]),s("div",O,[V,v(z,{type:t.type,id:t.item.id,count:"6"},null,8,["type","id"])])])])}}},E={class:"main__rec container"},G=s("h2",{class:"main__rec_title"},"Рекомендации",-1),K={class:"main__rec_list"},H={alt:"",class:"main__rec_list-item-img"},J={class:"main__rec_list-item-title"},P={class:"main__rec_list-item-title"},Q={__name:"Rec",props:{rec:Array,type:String},setup(t){const e=f(),i=a(()=>e.movieUrl),n=a(()=>e.movieSize);return e.getConfiguration(),(_,l)=>{const m=h("router-link"),u=x("lazy");return r(),d("div",E,[G,s("div",K,[(r(!0),d(S,null,k(t.rec,o=>(r(),b(m,{to:`${o.id}`,class:"main__rec_list-item",key:o.id},{default:B(()=>[g(s("img",H,null,512),[[u,i.value+n.value+o.backdrop_path]]),s("h2",J,c(o.name||o.title),1),s("h2",P,c(o.name||o.title),1)]),_:2},1032,["to"]))),128))])])}}},W={class:"main__sums"},X={class:"main__sums_item-name"},Z={class:"main__sums_item-text"},ee={__name:"info",props:{item:Object},setup(t){const e=t,i=a(()=>[{name:"Бюджет",text:e.item.budget?`$ ${e.item.budget}`:"Нет данных"},{name:"Сборы",text:e.item.revenue?`$ ${e.item.revenue}`:"Нет данных"},{name:"Статус",text:e.item.status?`$ ${e.item.status}`:"Нет данных"},{name:"Исходное название",text:e.item.original_title||e.item.original_name}]);return(n,_)=>(r(),d("div",W,[(r(!0),d(S,null,k(i.value,l=>(r(),d("div",{class:"main__sums_item",key:l.name},[s("span",X,c(l.name),1),s("span",Z,c(l.text),1)]))),128))]))}},te=w({id:"Rec",state:()=>({url:"https://api.themoviedb.org/3/",recMovie:null,recTv:null}),actions:{async getRec({type:t,id:e}){try{const i=await I.get(`${this.url}${t}/${e}/recommendations?api_key=${R}&language=RU`);t=="movie"?this.recMovie=i.data.results:this.recTv=i.data.results}catch(i){console.error("Произошла ошибка в получении рекомендованного фильма или сериала",i)}}},getters:{}}),se={key:0,class:"main__media"},ne={__name:"Media",props:{type:String},setup(t){const e=t,i=D(),n=U();n.getItemById({type:e.type,id:i.params.id});const _=te();_.getRec({type:e.type,id:i.params.id});const l=a(()=>{let u=e.type=="movie"?_.recMovie:_.Tv;if(u)return u.slice(0,4)}),m=a(()=>e.type=="movie"?n.movie:n.tv);return A(()=>{n.movie=n.tv=null}),(u,o)=>{const p=h("Loader");return m.value?(r(),d("div",se,[v(q,{type:t.type,item:m.value},null,8,["type","item"]),v(ee,{item:m.value},null,8,["item"]),v(Q,{type:t.type,rec:l.value},null,8,["type","rec"])])):(r(),b(p,{key:1}))}}};export{ne as _};

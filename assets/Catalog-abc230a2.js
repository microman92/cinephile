import{u as w,b as n,r as h,d as C,o as s,e as _,w as S,f as M,g as c,t as f,h as $,i as m,j as b,k as p,c as d,F as x,l as z,m as y}from"./index-bf880f66.js";const B={alt:"",class:"main__catalog_list-item-img"},P={class:"main__catalog_list-item-title"},D={__name:"CatalogItem",props:{item:Object,type:String},setup(t){const e=w(),a=n(()=>e.movieUrl),r=n(()=>e.movieSize);return e.getConfiguration(),(u,i)=>{const o=h("router-link"),l=C("lazy");return s(),_(o,{to:`${t.type}/${t.item.id}`,class:"main__catalog_list-item"},{default:S(()=>[M(c("img",B,null,512),[[l,a.value+r.value+t.item.backdrop_path]]),c("h2",P,f(t.item.name||t.item.title),1)]),_:1},8,["to"])}}},L={key:0,class:"main__catalog container"},j={class:"main__catalog_title"},F={class:"main__catalog_list"},N={__name:"Catalog",props:["type"],setup(t){const e=t,a=$();a.getPopular({type:e.type}),n(()=>e.type=="movie"?a.popularMovies:a.popularTvs);const r=n(()=>e.type=="movie"?"Все фильмы":"Все сериалы");let u=m(1),i=m([]),o=m(!1);const l=async()=>{if(!o.value){o.value=!0,await a.getPopular({type:e.type,page:u.value});const g=e.type=="movie"?a.popularMovies:a.popularTvs;i.value.push(...g),o.value=!1,u.value++}};return b(()=>{window.onscroll=()=>{scrollY+window.innerHeight>=document.body.scrollHeight&&l()},l()}),(g,H)=>{const k=h("Loader");return p(i)?(s(),d("div",L,[c("h2",j,f(r.value),1),c("div",F,[(s(!0),d(x,null,z(p(i),v=>(s(),_(D,{key:v.id,item:v,type:t.type},null,8,["item","type"]))),128))]),p(o)?(s(),_(k,{key:0})):y("",!0)])):y("",!0)}}};export{N as _};
